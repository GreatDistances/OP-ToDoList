(()=>{"use strict";var e={d:(t,s)=>{for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{A:()=>I});class t{static newListId=localStorage.getItem("newListId")||1e4;constructor(e,s=[]){this.listId="L"+t.newListId++,this.listTitle=e,this.listItems=s}static createList=e=>new t(e)}class s{static newItemId=localStorage.getItem("newItemId")||1e5;constructor(e="",t="",i="",n="",l="",o=!1){this.itemId="I"+ ++s.newItemId,this.itemTitle=e,this.itemDescription=t,this.itemPriority=i,this.itemDueDate=n,this.itemNotes=l,this.itemIsCompleted=o}}const i=(e,t,i,n,l)=>new s(e,t,i,n,l),n=e=>{const t=document.querySelector("#itemViewMain"),s=document.querySelector("#itemContainerContainer");t.append(s),s.classList.add("itemContainerContainer"),s.innerHTML="";const i=e,l=I.getAllListIds(),o=I.getAllListTitles(),d=[...I.getAllListItems(i)];console.log(d.length);for(let e=0;e<d.length;e++){console.log(d[e]);const t=document.createElement("div");t.classList.add("itemContainer");const c=document.createElement("div");c.classList.add("itemIsCompletedCheckBoxDiv");const r=document.createElement("div");r.classList.add("itemFieldsContainer");const m=document.createElement("div");m.classList.add("deleteItemBtnContainer");const u=(t,s,i)=>{const n=d[e][t],l=!1,o=document.createElement("div"),a=document.createElement("input");a.setAttribute(`data-${t}`,d[e].itemId),a.classList.add("fields");const c=document.createElement("br"),r=document.createElement("label");a.value=n,r.classList.add("listItemLabel"),r.innerText=t.slice(4),a.contentEditable="true",a.addEventListener("keypress",(function(t){"Enter"===t.key&&(a.innerText,I[i](d[e].itemId,a.value),a.blur(),t.preventDefault())})),a.onblur=()=>{l?l=!1:I[i](d[e].itemId,a.value)},o.append(a,c,r),s.append(o)},p=(t,s,i)=>{const n=d[e][t],l=document.createElement("div"),o=document.createElement("input");o.setAttribute(`data-${t}`,d[e].itemId),o.classList.add("fields");const a=document.createElement("br"),c=document.createElement("label");c.classList.add("listItemLabel"),c.innerText="Due Date",o.setAttribute("type","date"),o.value=n,""!==n&&null!=n||(o.style.color="lightGrey"),o.onblur=()=>{I[i](d[e].itemId,o.value),""!==o.value&&null!==o.value&&void 0!==o.value?o.style.color="black":""!==o.value&&null!==o.value&&void 0!==o.value||(o.style.color="lightGrey")},l.append(o,a,c),s.append(l)},L=(t,s,i)=>{const n=d[e][t],l=document.createElement("div"),o=document.createElement("select");o.setAttribute(`data-${t}`,d[e].itemId),o.classList.add("fields");const a=document.createElement("br"),c=document.createElement("label");c.classList.add("listItemLabel"),c.innerText=t.slice(4);const r=["","!","!!","!!!"];for(let e=0;e<r.length;e++){const t=document.createElement("option");t.value=r[e],t.text=r[e],o.style.fontWeight="bold",o.appendChild(t)}o.value=n,o.onblur=()=>{I[i](d[e].itemId,o.value)},l.append(o,a,c),s.append(l)},g=(t,s,a)=>{const c=i,r=document.createElement("div"),m=document.createElement("select");m.setAttribute(`data-${t}`,d[e].itemId),m.classList.add("fields");const u=document.createElement("br"),p=document.createElement("label");p.classList.add("listItemLabel"),p.innerText="List";const L=[...l],g=[...o];for(let e=0;e<L.length;e++){const t=document.createElement("option");t.value=L[e],t.text=`${g[e]} - ID# ${L[e]}`,m.appendChild(t)}m.value=c,m.onchange=()=>{I[a](d[e].itemId,i,m.value),n(i)},r.append(m,u,p),s.append(r)},h=()=>{const t=document.createElement("button");t.innerText="X",t.classList.add("deleteBtn"),t.addEventListener("click",(()=>{I.deleteItem(d[e].itemId,i),a(i)})),m.append(t)};(()=>{const t=document.createElement("INPUT");t.setAttribute("type","checkbox"),t.checked=d[e].itemIsCompleted,t.addEventListener("click",(()=>{d[e].itemIsCompleted=!d[e].itemIsCompleted})),c.classList.add("itemIsCompletedCheckBoxDiv"),c.append(t)})(),u("itemTitle",r,"setItemTitle"),u("itemDescription",r,"setItemDescription"),g("listId",r,"setItemToDifferentList"),p("itemDueDate",r,"setItemDueDate"),L("itemPriority",r,"setItemPriority"),h(),t.append(c),t.append(r),t.append(m),s.append(t)}},l=n;let o="";const a=e=>{const t=[...I.getAllLists()];let s,n;I.setCurrentListId(e);const a=document.createElement("div"),r=document.querySelector("#itemViewHeaderContainer"),m=document.querySelector("#itemContainerContainer"),u=document.createElement("div"),p=document.createElement("h1"),L=document.createElement("h3"),g=document.createElement("div");g.classList.add("listItemBtnDivContainer");const h=document.createElement("div");r.innerHTML="";const v=document.createElement("button"),E=document.createElement("button"),y=document.createElement("button"),T=document.createElement("button");u.classList.add("listTitleContainer"),itemViewMain.append(g),h.classList.add("listItemSortBtnDiv");const D=()=>{m.innerHTML="";for(let i=0;i<t.length;i++)t[i].listId===e&&(s=""===t[i].listTitle?"Untitled Project":`${t[i].listTitle}`,n=`ID # ${t[i].listId}`,p.innerText=s,L.innerText=n,t[i].listItems.length>0?l(e):(a.classList.add("itemContainerNoTasks"),a.innerText="There are currently no tasks in this project.",m.append(a)))};v.classList.add("main-button"),v.innerText="New Task",v.addEventListener("click",(()=>{const e=I.getCurrentListId();I.addListItem(i(),e),l(e)})),g.append(v),E.classList.add("normal-button"),E.innerText="Sort By Date",E.addEventListener("click",(()=>{"itemDueDateAsc"!==o?(o="itemDueDateAsc",c("itemDueDate")):"itemDueDateAsc"===o&&(d("itemDueDate"),o="itemDueDateDesc"),D()})),h.append(E),y.classList.add("normal-button"),y.innerText="Sort By Completion",y.addEventListener("click",(()=>{"itemIsCompletedAsc"!==o?(o="itemIsCompletedAsc",d("itemIsCompleted")):"itemIsCompletedAsc"===o&&(c("itemIsCompleted"),o="itemIsCompletedDesc"),D()})),h.append(y),T.classList.add("normal-button"),T.innerText="Sort By Priority",T.addEventListener("click",(()=>{"itemPriorityDesc"!==o?(o="itemPriorityDesc",c("itemPriority")):"itemPriorityDesc"===o&&(d("itemPriority"),o="itemPriorityAsc"),D()})),h.append(T),u.append(p,L),g.append(v),h.append(E),h.append(y),h.append(T),g.append(h),r.append(u),r.append(g),D()},d=e=>{const t=I.getCurrentListId();let s=I.getAllListItems(t);return s=s.sort(((t,s)=>t[e]<s[e]?-1:t[e]>s[e]?1:0)),s.forEach((e=>{console.log(e)})),s},c=e=>{const t=I.getCurrentListId();let s=I.getAllListItems(t);return s=s.sort(((t,s)=>s[e]<t[e]?-1:s[e]>t[e]?1:0)),s.forEach((e=>{console.log(e)})),s},r=()=>{const e=document.querySelector("#listContainer");e.replaceChildren();const t=I.getAllLists();for(let s=0;s<t.length;s++){const i=t[s].listId,n=document.createElement("div");e.append(n);const l=()=>{const e=document.createElement("button");e.innerText="View",e.classList.add("normal-button-plus"),e.addEventListener("click",(()=>{a(i)})),n.append(e)},o=e=>{let l;"L10000"===e?(l=document.createElement("div"),l.innerText="Unassigned Tasks",l.classList.add("unassignedItemsListTitle")):(l=document.createElement("input"),l.value=t[s].listTitle,l.classList.add("fields")),l.setAttribute("data-list-title-id",i),n.append(l),l.addEventListener("keydown",(function(e){"Enter"===e.key&&(l.blur(),a(i),e.preventDefault())})),l.addEventListener("change",(function(){const e=l.value.trim();e!==t[s].listTitle.trim()&&(I.setListTitle(i,e),a(i))})),n.append(l)},d=()=>{const e=document.createElement("div");e.innerText=t[s].listId,e.classList.add("listIdField"),e.setAttribute("data-list-title-id",i),n.append(e)},c=e=>{const t=document.createElement("div");t.classList.add("deleteBtnDiv");const s=document.createElement("button");s.addEventListener("click",(function(){I.deleteList(i)})),s.classList.add("deleteBtn"),s.innerText="X",n.append(t),"L10000"!==e&&t.append(s)},r=e=>{"L10000"===e?n.classList.add("unassignedItemsList"):n.classList.add("thisList")};"L10000"!==t[s].listId&&(l(),o(i),d(i),c(i),r(i))}};class m{constructor(){this.listRepository=[new t("Unassigned Tasks",[]),new t("Demo List Personal",[new s("File 2023 personal taxes","Complete and file federal taxes for 2023 tax year","!!","2024-04-15","Download and reconcile all statements",!1),new s("Pick up Amazon packages","Location: Amazon locker on Main St","!","2024-02-21","New running shoes & phone charging cable",!0),new s("Shred old tax files","All files > 7 years old","","2025-01-01","",!1),new s("Oil change for SUV","Between 3000-5000 miles","!!","2024-03-01","",!0)])],this.currentListId=0}saveToLocalStorage(){const e=JSON.stringify(this);localStorage.setItem("ListManager",e)}loadFromLocalStorage(){const e=localStorage.getItem("ListManager"),t=JSON.parse(e);this.listManager=new m,Object.assign(listManager,t),console.log("ListManager loaded from localStorage:",listManager)}getAllLists(){return this.listRepository}getAllListIds(){return this.listRepository.map((e=>e.listId))}getAllListTitles(){return this.listRepository.map((e=>e.listTitle))}setCurrentListId(e){return this.currentListId=e,this.saveToLocalStorage(),this.currentListId}getCurrentListId(){return this.currentListId}getCurrentListIndex(){const e=this.getCurrentListId();if(-1!==e)return this.listRepository.map((e=>e.listId)).indexOf(e)}findListIndex(e){console.log(e);const t=this.listRepository.map((e=>e.listId)).indexOf(e);return-1===t&&console.log(`List ID# ${e} not found, no list index available`),t}addNewList(e){this.listRepository.unshift(e),r(),this.setCurrentListId(e.listId),this.saveToLocalStorage();const s=i();var n;this.addListItem(s,!0),a(this.getCurrentListId()),console.log(e.listId),n=e.listId,document.querySelector(`[data-list-title-id=${n}]`).focus(),this.setCurrentListId(e.listId),localStorage.setItem("newListId",t.newListId)}deleteList(e){if("L10000"===e)return void console.log("Unassigned Tasks list cannot be deleted by user.");const t=this.findListIndex(e);-1!==t?(this.listRepository.splice(t,1),console.log(`List ID# ${e} deleted`)):console.log(`List ID # ${e} not found for delete`),r(),0===this.listRepository.length?a(-1):a(this.setCurrentListId(this.listRepository[0].listId)),this.saveToLocalStorage()}addListItem(e,t){for(let s=0;s<this.listRepository.length;s++)this.listRepository[s].listId===t&&this.listRepository[s].listItems.unshift(e);localStorage.setItem("newItemId",s.newItemId),this.saveToLocalStorage()}deleteItem(e,t){const s=this.getListItemIndex(e),i=this.findListIndex(t);-1!==s?(this.listRepository[i].listItems.splice(s,1),console.log(`Item ID# ${e} deleted`)):console.log(`Item ID # ${e} not found for delete`),this.saveToLocalStorage()}getListTitle(e){const t=this.findListIndex(e);return this.listRepository[t].listTitle}setListTitle(e,t){const s=this.findListIndex(e);-1!==s&&this.listRepository[s].listTitle!==t&&(this.listRepository[s].listTitle=t,console.log(`List ID# ${e} listTitle updated to ${t}`),console.log(this.listRepository),r(),this.saveToLocalStorage())}getListItemIndex(e){const t=this.getCurrentListIndex();if(-1===t)return-1;const s=this.listRepository[t].listItems;return s?s.findIndex((t=>t.itemId===e)):-1}getAllListItemsAllLists(){let e=[];return this.listRepository.forEach((t=>{t.listItems.forEach((s=>{const i={...s,listId:t.listId};e.push(i)}))})),console.log(e),e}getAllListItems(e){const t=this.findListIndex(e),s=this.listRepository[t].listItems;return s.length<1?-1:s}getListItem(e,t){const s=this.getAllListItems(e).find((e=>e.itemId===t));return console.log(s),s}setItemTitle(e,t){const s=this.getCurrentListIndex(),i=this.getListItemIndex(e);-1!==s&&-1!==i&&(this.listRepository[s].listItems[i].itemTitle=t),this.saveToLocalStorage()}setItemDescription(e,t){const s=this.getCurrentListIndex(),i=this.getListItemIndex(e);-1!==s&&-1!==i&&(this.listRepository[s].listItems[i].itemDescription=t),this.saveToLocalStorage()}setItemDueDate(e,t){console.log("due date");const s=this.getCurrentListIndex(),i=this.getListItemIndex(e);-1!==s&&-1!==i&&(this.listRepository[s].listItems[i].itemDueDate=t),this.saveToLocalStorage()}setItemPriority(e,t){const s=this.getCurrentListIndex(),i=this.getListItemIndex(e);-1!==s&&-1!==i&&(this.listRepository[s].listItems[i].itemPriority=t),this.saveToLocalStorage()}setItemNotes(e,t){const s=this.getCurrentListIndex(),i=this.getListItemIndex(e);-1!==s&&-1!==i&&(this.listRepository[s].listItems[i].itemNotes=t),this.saveToLocalStorage()}setItemToDifferentList(e,t,s){if(console.log("setItemToDifferentList",e,t,s),t===s)return;const i=this.getListItem(t,e);this.addListItem(i,s),this.deleteItem(i.itemId,t),this.saveToLocalStorage()}}const u=m,p=()=>{let e,t;const s=document.createElement("div"),n=document.querySelector("#itemViewHeaderContainer"),l=document.querySelector("#itemContainerContainer"),o=document.createElement("div"),a=document.createElement("h1"),d=document.createElement("h3"),c=document.createElement("div");c.classList.add("listItemBtnDivContainer");const r=document.createElement("div");r.classList.add("listItemSortBtnDiv"),n.innerHTML="";const m=document.createElement("button"),u=document.createElement("button"),L=document.createElement("button"),g=document.createElement("button");o.classList.add("listTitleContainer"),itemViewMain.append(c);let h="",v=[];v=I.getAllListItemsAllLists(),console.log(v),l.innerHTML="",e="All Tasks",t="",a.innerText="All Tasks",d.innerText="Viewing All";const E=()=>{l.innerHTML="",v.length<1?(s.classList.add("itemContainerNoTasks"),s.innerText="There are currently no tasks in the system.",l.append(s)):v.forEach((e=>(e=>{console.log(e);let t=I.getAllListIds(),s=I.getAllListTitles();const i=document.querySelector("#itemContainerContainer");i.classList.add("itemContainerContainer");const n=document.createElement("div");n.classList.add("itemContainer");const l=document.createElement("div");l.classList.add("itemIsCompletedCheckBoxDiv"),n.append(l);const o=document.createElement("div");o.classList.add("itemFieldsContainer"),n.append(o);const a=document.createElement("div");a.classList.add("deleteItemBtnContainer"),n.append(a);const d=(t,s,i)=>{const n=e[t],l=!1,o=document.createElement("div"),a=document.createElement("input");a.setAttribute(`data-${t}`,e.itemId),a.classList.add("fields");const d=document.createElement("br"),c=document.createElement("label");a.value=n,c.classList.add("listItemLabel"),c.innerText=t.slice(4),a.contentEditable="true",a.addEventListener("keypress",(function(t){I.setCurrentListId(e.listId),"Enter"===t.key&&(a.innerText,I[i](e.itemId,a.value),a.blur(),t.preventDefault())})),a.onblur=()=>{I.setCurrentListId(e.listId),l?l=!1:I[i](e.itemId,a.value)},o.append(a,d,c),s.append(o)};(()=>{const t=document.createElement("INPUT");t.setAttribute("type","checkbox"),t.checked=e.itemIsCompleted,t.addEventListener("click",(()=>{e.itemIsCompleted=!e.itemIsCompleted})),l.classList.add("itemIsCompletedCheckBoxDiv"),l.append(t)})(),d("itemTitle",o,"setItemTitle"),d("itemDescription",o,"setItemDescription"),((i,n,l)=>{const o=e.listId,a=document.createElement("div"),d=document.createElement("select");d.setAttribute("data-listId",e.itemId),d.classList.add("fields");const c=document.createElement("br"),r=document.createElement("label");r.classList.add("listItemLabel"),r.innerText="List";const m=[...t],u=[...s];for(let e=0;e<m.length;e++){const t=document.createElement("option");t.value=m[e],t.text=`${u[e]} - ID# ${m[e]}`,d.appendChild(t)}d.value=o,d.onchange=()=>{I.setCurrentListId(e.listId),I.setItemToDifferentList(e.itemId,e.listId,d.value)},a.append(d,c,r),n.append(a)})(0,o),((t,s,i)=>{const n=e.itemDueDate,l=document.createElement("div"),o=document.createElement("input");o.setAttribute("data-itemDueDate",e.itemId),o.classList.add("fields");const a=document.createElement("br"),d=document.createElement("label");d.classList.add("listItemLabel"),d.innerText="Due Date",o.setAttribute("type","date"),o.value=n,""!==n&&null!=n||(o.style.color="lightGrey"),o.onchange=()=>{I.setCurrentListId(e.listId),console.log(o.value),console.log(e.itemId),I.setItemDueDate(e.itemId,o.value),""!==o.value&&null!==o.value&&void 0!==o.value?o.style.color="black":""!==o.value&&null!==o.value&&void 0!==o.value||(o.style.color="lightGrey")},l.append(o,a,d),s.append(l)})(0,o),((t,s,i)=>{const n=e[t],l=document.createElement("div"),o=document.createElement("select");o.setAttribute(`data-${t}`,e.itemId),o.classList.add("fields");const a=document.createElement("br"),d=document.createElement("label");d.classList.add("listItemLabel"),d.innerText=t.slice(4);const c=["","!","!!","!!!"];for(let e=0;e<c.length;e++){const t=document.createElement("option");t.value=c[e],t.text=c[e],o.style.fontWeight="bold",o.appendChild(t)}o.value=n,o.onblur=()=>{I.setCurrentListId(e.listId),I.setItemPriority(e.itemId,o.value)},l.append(o,a,d),s.append(l)})("itemPriority",o),(()=>{const t=document.createElement("button");t.innerText="X",t.classList.add("deleteBtn"),t.addEventListener("click",(()=>{I.setCurrentListId(e.listId),console.log(e.itemId),console.log(e.listId),I.deleteItem(e.itemId,e.listId),p()})),a.append(t),n.append(a)})(),i.append(n)})(e)))},y=(e="itemDueDate",t=v)=>{t.sort(((t,s)=>s[e]>t[e]?-1:s[e]<t[e]?1:0)),console.log(t)},T=(e,t)=>{t.sort(((t,s)=>s[e]<t[e]?-1:s[e]>t[e]?1:0)),console.log(t)};0===v.length?(s.classList.add("itemContainerNoTasks"),s.innerText="There are currently no tasks in this project.",l.append(s)):v.length,y("itemDueDate",v),m.classList.add("main-button"),m.innerText="New Task",m.addEventListener("click",(()=>{I.addListItem(i(),"L10000"),v=I.getAllListItemsAllLists(),p()})),c.append(m),u.classList.add("normal-button"),u.innerText="Sort By Date",r.append(u),u.addEventListener("click",(()=>{"itemDueDateAsc"===h?(T("itemDueDate",v),h="itemDueDateDesc"):(y("itemDueDate",v),h="itemDueDateAsc"),console.log(h),console.log("sortByDate"),console.log(v),E()})),r.append(u),L.classList.add("normal-button"),L.innerText="Sort By Completion",r.append(L),L.addEventListener("click",(()=>{"itemIsCompletedAsc"!==h?(h="itemIsCompletedAsc",y("itemIsCompleted",v)):"itemIsCompletedAsc"===h&&(T("itemIsCompleted",v),h="itemIsCompletedDesc"),E()})),r.append(L),g.classList.add("normal-button"),g.innerText="Sort By Priority",r.append(g),g.addEventListener("click",(()=>{"itemPriorityDesc"!==h?(h="itemPriorityDesc",T("itemPriority",v)):"itemPriorityDesc"===h&&(y("itemPriority",v),h="itemPriorityAsc"),E()})),r.append(g),o.append(a,d),c.append(m),r.append(u),r.append(L),r.append(g),c.append(r),n.append(o),n.append(c),E()};let I;(()=>{const e=localStorage.getItem("ListManager");if(e&&void 0!==e){const t=JSON.parse(e);I=new u,Object.assign(I,t),console.log("ListManager loaded from localStorage:",I)}else I=new u,localStorage.setItem("ListManager",JSON.stringify(I)),console.log("New ListManager created and saved to localStorage.");r(),(()=>{document.querySelector("#newListBtn").addEventListener("click",(()=>{I.addNewList(t.createList(""))})),document.querySelector("#displayAllTasksBtn").addEventListener("click",(()=>{p()})),document.querySelector("#displayUnassignedTasksBtn").addEventListener("click",(()=>{a("L10000")}));let e="";const s=document.querySelector("#listBtnDivSecondaryTwo");s.classList.add("listBtnDivSecondaryTwo"),document.createElement("div").classList.add("listBtnSubContainer");const i=document.createElement("button");i.innerText="Sort By ID",i.classList.add("normal-button"),i.addEventListener("click",(()=>{"listIdAsc"!==e?(e="listIdAsc",l("listId")):"listIdAsc"===e&&(o("listId"),e="listIdDesc"),r()}));const n=document.createElement("button");n.classList.add("normal-button"),n.innerText="Sort By Name",n.addEventListener("click",(()=>{"listTitleAsc"!==e?(e="listTitleAsc",l("listTitle")):"listTitleAsc"===e&&(o("listTitle"),e="listTitleDesc"),r()})),s.append(n,i);const l=e=>{let t=I.getAllLists();return t=t.sort(((t,s)=>t[e]<s[e]?-1:t[e]>s[e]?1:0)),t.forEach((e=>{console.log(e)})),t},o=e=>{let t=I.getAllLists();return t=t.sort(((t,s)=>s[e]<t[e]?-1:s[e]>t[e]?1:0)),t.forEach((e=>{console.log(e)})),t}})(),p()})()})();